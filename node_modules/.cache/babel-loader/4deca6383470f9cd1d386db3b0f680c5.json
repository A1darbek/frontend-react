{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0410\\u0439\\u0434\\u0430\\u0440\\u0431\\u0435\\u043A\\\\Documents\\\\SpringBootProjects\\\\frontend-react\\\\src\\\\components\\\\CreateSongForm.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { getUser } from \"../helpers/auth_helper\";\nconst CreateSongForm = () => {\n  const [title, setTitle] = useState('');\n  const [artist, setArtist] = useState('');\n  const [album, setAlbum] = useState('');\n  const [genre, setGenre] = useState('');\n  const [songFile, setSongFile] = useState(null);\n  const [imageFile, setImageFile] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    const formData = new FormData();\n    formData.append('songFile', songFile);\n    formData.append('imageFile', imageFile);\n    formData.append('title', title);\n    formData.append('artist', artist);\n    formData.append('album', album);\n    formData.append('genre', genre);\n    try {\n      const _callApiPost = (token, data) => {\n        const headers = {\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + token\n        };\n        return axios.post(\"http://localhost:8083/songs\", data, {\n          headers\n        });\n      };\n\n      // console.log('Song created successfully:', response.data);\n      setIsLoading(false);\n      setErrorMessage('');\n      // Handle success or display a success message to the user\n    } catch (error) {\n      setIsLoading(false);\n      if (error.response && error.response.data) {\n        setErrorMessage(error.response.data);\n      } else {\n        setErrorMessage('Failed to create song. Please try again later.');\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    placeholder: \"Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: artist,\n    onChange: e => setArtist(e.target.value),\n    placeholder: \"Artist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: album,\n    onChange: e => setAlbum(e.target.value),\n    placeholder: \"Album\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: genre,\n    onChange: e => setGenre(e.target.value),\n    placeholder: \"Genre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"songFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Select Song File:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: e => setSongFile(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"imageFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, \"Select Image File:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: e => setImageFile(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, isLoading ? 'Creating...' : 'Create Song'), errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 30\n    }\n  }, errorMessage));\n};\nexport const callApiPost = data => {\n  return getUser().then(user => {\n    if (user && user.access_token) {\n      return _callApiPost(user.access_token, data).catch(error => {\n        throw error;\n      });\n    } else {\n      throw new Error('user is not logged in');\n    }\n  });\n};\nexport default CreateSongForm;","map":{"version":3,"names":["React","useState","axios","getUser","CreateSongForm","title","setTitle","artist","setArtist","album","setAlbum","genre","setGenre","songFile","setSongFile","imageFile","setImageFile","isLoading","setIsLoading","errorMessage","setErrorMessage","handleSubmit","e","preventDefault","formData","FormData","append","_callApiPost","token","data","headers","Accept","Authorization","post","error","response","createElement","onSubmit","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","placeholder","htmlFor","files","disabled","callApiPost","then","user","access_token","catch","Error"],"sources":["C:/Users/Айдарбек/Documents/SpringBootProjects/frontend-react/src/components/CreateSongForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport {getUser} from \"../helpers/auth_helper\";\r\n\r\nconst CreateSongForm = () => {\r\n    const [title, setTitle] = useState('');\r\n    const [artist, setArtist] = useState('');\r\n    const [album, setAlbum] = useState('');\r\n    const [genre, setGenre] = useState('');\r\n    const [songFile, setSongFile] = useState(null);\r\n    const [imageFile, setImageFile] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n\r\n        const formData = new FormData();\r\n        formData.append('songFile', songFile);\r\n        formData.append('imageFile', imageFile);\r\n        formData.append('title', title);\r\n        formData.append('artist', artist);\r\n        formData.append('album', album);\r\n        formData.append('genre', genre);\r\n\r\n        try {\r\n            const _callApiPost = (token, data) => {\r\n                const headers = {\r\n                    Accept: \"application/json\",\r\n                    Authorization: \"Bearer \" + token\r\n                };\r\n                return axios.post(\"http://localhost:8083/songs\", data, { headers });\r\n            }\r\n\r\n            // console.log('Song created successfully:', response.data);\r\n            setIsLoading(false);\r\n            setErrorMessage('');\r\n            // Handle success or display a success message to the user\r\n        } catch (error) {\r\n            setIsLoading(false);\r\n            if (error.response && error.response.data) {\r\n                setErrorMessage(error.response.data);\r\n            } else {\r\n                setErrorMessage('Failed to create song. Please try again later.');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} placeholder=\"Title\" />\r\n            <input type=\"text\" value={artist} onChange={(e) => setArtist(e.target.value)} placeholder=\"Artist\" />\r\n            <input type=\"text\" value={album} onChange={(e) => setAlbum(e.target.value)} placeholder=\"Album\" />\r\n            <input type=\"text\" value={genre} onChange={(e) => setGenre(e.target.value)} placeholder=\"Genre\" />\r\n            <label htmlFor=\"songFile\">Select Song File:</label>\r\n            <input type=\"file\" onChange={(e) => setSongFile(e.target.files[0])} />\r\n            <label htmlFor=\"imageFile\">Select Image File:</label>\r\n            <input type=\"file\" onChange={(e) => setImageFile(e.target.files[0])} />\r\n            <button type=\"submit\" disabled={isLoading}>\r\n                {isLoading ? 'Creating...' : 'Create Song'}\r\n            </button>\r\n            {errorMessage && <p>{errorMessage}</p>}\r\n        </form>\r\n    );\r\n};\r\n\r\n\r\nexport const callApiPost = (data) => {\r\n    return getUser().then(user => {\r\n        if (user && user.access_token) {\r\n            return _callApiPost(user.access_token, data).catch(error => {\r\n                throw error;\r\n            });\r\n        } else {\r\n            throw new Error('user is not logged in');\r\n        }\r\n    });\r\n}\r\n\r\nexport default CreateSongForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
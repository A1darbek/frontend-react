{"ast":null,"code":"import axios from 'axios';\nimport { getUser } from './auth_helper';\nimport { useEffect, useState } from \"react\";\nconst _callApi = token => {\n  const [songUrl, setSongUrl] = useState(null);\n  const headers = {\n    Accept: \"application/json\",\n    Authorization: \"Bearer \" + token\n  };\n  useEffect(() => {\n    _callApi(token).then(r => r.data);\n  }, []);\n  return axios.get(\"http://localhost:8083/songs/1/stream\", {\n    headers\n  });\n};\nexport const callApi = () => {\n  return getUser().then(user => {\n    if (user && user.access_token) {\n      return _callApi(user.access_token).catch(error => {\n        throw error;\n      });\n    } else {\n      throw new Error('user is not logged in');\n    }\n  });\n};","map":{"version":3,"names":["axios","getUser","useEffect","useState","_callApi","token","songUrl","setSongUrl","headers","Accept","Authorization","then","r","data","get","callApi","user","access_token","catch","error","Error"],"sources":["C:/Users/Айдарбек/Documents/SpringBootProjects/frontend-react/src/helpers/axios_helper.js"],"sourcesContent":["import axios from 'axios';\nimport { getUser } from './auth_helper';\nimport {useEffect, useState} from \"react\";\n\n\nconst _callApi = (token) => {\n\n    const [songUrl, setSongUrl] = useState(null);\n\n    const headers = {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + token\n    };\n\n    useEffect(() => {\n        _callApi(token).then(r => r.data);\n    }, []);\n\n    return axios.get(\"http://localhost:8083/songs/1/stream\", { headers });\n}\n\nexport const callApi = () => {\n    return getUser().then(user => {\n        if (user && user.access_token) {\n            return _callApi(user.access_token).catch(error => {\n                throw error;\n            });\n        } else {\n            throw new Error('user is not logged in');\n        }\n    });\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AACvC,SAAQC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAGzC,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EAExB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAMK,OAAO,GAAG;IACZC,MAAM,EAAE,kBAAkB;IAC1BC,aAAa,EAAE,SAAS,GAAGL;EAC/B,CAAC;EAEDH,SAAS,CAAC,MAAM;IACZE,QAAQ,CAACC,KAAK,CAAC,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EACrC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOb,KAAK,CAACc,GAAG,CAAC,sCAAsC,EAAE;IAAEN;EAAQ,CAAC,CAAC;AACzE,CAAC;AAED,OAAO,MAAMO,OAAO,GAAGA,CAAA,KAAM;EACzB,OAAOd,OAAO,CAAC,CAAC,CAACU,IAAI,CAACK,IAAI,IAAI;IAC1B,IAAIA,IAAI,IAAIA,IAAI,CAACC,YAAY,EAAE;MAC3B,OAAOb,QAAQ,CAACY,IAAI,CAACC,YAAY,CAAC,CAACC,KAAK,CAACC,KAAK,IAAI;QAC9C,MAAMA,KAAK;MACf,CAAC,CAAC;IACN,CAAC,MAAM;MACH,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;IAC5C;EACJ,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module"}